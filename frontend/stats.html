<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TFT Player Statistics</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
            color: white;
        }

        .stats-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 1rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.75rem;
            padding: 1.5rem;
        }

        .player-card {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .player-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            transform: translate(50%, -50%);
        }

        .stat-metric {
            text-align: center;
            padding: 1.5rem;
            border-radius: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: 700;
            line-height: 1;
            margin-bottom: 0.5rem;
        }

        .metric-label {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        .placement-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }

        .placement-1 { background: #fbbf24; }
        .placement-2 { background: #c0c0c0; }
        .placement-3 { background: #cd7f32; }
        .placement-4 { background: #10b981; }
        .placement-5 { background: #3b82f6; }
        .placement-6 { background: #6366f1; }
        .placement-7 { background: #8b5cf6; }
        .placement-8 { background: #ef4444; }

        .performance-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge-excellent { background: #10b981; color: white; }
        .badge-good { background: #3b82f6; color: white; }
        .badge-average { background: #f59e0b; color: white; }
        .badge-poor { background: #ef4444; color: white; }

        .search-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            color: white;
            width: 100%;
            backdrop-filter: blur(10px);
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .search-input:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        .tab-button {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
        }

        .tab-button.active {
            background: #6366f1;
            border-color: #6366f1;
        }

        .tab-button:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
        }

        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #6366f1;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .game-history-item {
            display: flex;
            align-items: center;
            justify-content: between;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            border-left: 4px solid;
        }

        .rank-improvement {
            background: linear-gradient(90deg, #10b981, #059669);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
        }

        .rank-decline {
            background: linear-gradient(90deg, #ef4444, #dc2626);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .metric-value {
                font-size: 2rem;
            }
            
            .player-card {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="min-h-screen">
        <!-- Header -->
        <header class="bg-black bg-opacity-50 backdrop-filter backdrop-blur-lg">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <h1 class="text-xl font-bold">TFT Player Statistics</h1>
                    <div class="flex items-center space-x-4">
                        <a href="leaderboard.html" class="text-gray-300 hover:text-white transition-colors">Leaderboard</a>
                        <a href="admin.html" class="text-gray-300 hover:text-white transition-colors">Admin</a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            
            <!-- Player Search -->
            <div class="mb-8">
                <div class="max-w-md mx-auto">
                    <input
                        type="text"
                        id="playerSearch"
                        placeholder="Search for a player..."
                        class="search-input"
                        autocomplete="off"
                    >
                    <div id="searchResults" class="mt-2 space-y-2 hidden">
                        <!-- Search results will appear here -->
                    </div>
                </div>
            </div>

            <!-- Loading State -->
            <div id="loadingState" class="text-center py-12 hidden">
                <div class="loading-spinner mx-auto mb-4"></div>
                <p class="text-gray-400">Loading player statistics...</p>
            </div>

            <!-- Player Profile -->
            <div id="playerProfile" class="hidden">
                <div class="player-card">
                    <div class="relative z-10">
                        <div class="flex flex-col md:flex-row items-start md:items-center justify-between">
                            <div>
                                <h2 id="playerName" class="text-3xl font-bold mb-2">dishsoap</h2>
                                <div class="flex items-center space-x-4 text-lg opacity-90">
                                    <span id="playerRegion" class="px-3 py-1 bg-white bg-opacity-20 rounded-full">NA</span>
                                    <span id="playerRank" class="font-semibold">#1 Global</span>
                                </div>
                            </div>
                            <div class="mt-4 md:mt-0">
                                <div id="performanceBadge" class="performance-badge badge-excellent">Excellent Performance</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Statistics Overview -->
                <div class="stats-grid grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
                    <div class="stat-metric">
                        <div id="totalPoints" class="metric-value text-yellow-400">28</div>
                        <div class="metric-label">Total Points</div>
                    </div>
                    <div class="stat-metric">
                        <div id="avgPlacement" class="metric-value text-blue-400">3.2</div>
                        <div class="metric-label">Avg Placement</div>
                    </div>
                    <div class="stat-metric">
                        <div id="gamesPlayed" class="metric-value text-green-400">5</div>
                        <div class="metric-label">Games Played</div>
                    </div>
                    <div class="stat-metric">
                        <div id="winRate" class="metric-value text-purple-400">20%</div>
                        <div class="metric-label">Win Rate</div>
                    </div>
                </div>

                <!-- Tabs -->
                <div class="flex space-x-2 mb-6 overflow-x-auto">
                    <button onclick="switchTab('performance')" class="tab-button active" data-tab="performance">Performance</button>
                    <button onclick="switchTab('history')" class="tab-button" data-tab="history">Game History</button>
                    <button onclick="switchTab('comparison')" class="tab-button" data-tab="comparison">Comparison</button>
                    <button onclick="switchTab('trends')" class="tab-button" data-tab="trends">Trends</button>
                </div>

                <!-- Tab Content -->
                <div id="performanceTab" class="tab-content">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Placement Distribution Chart -->
                        <div class="stats-card p-6">
                            <h3 class="text-xl font-semibold mb-4">Placement Distribution</h3>
                            <div class="chart-container">
                                <canvas id="placementChart" width="400" height="300"></canvas>
                            </div>
                        </div>

                        <!-- Points Over Time Chart -->
                        <div class="stats-card p-6">
                            <h3 class="text-xl font-semibold mb-4">Points Over Time</h3>
                            <div class="chart-container">
                                <canvas id="pointsChart" width="400" height="300"></canvas>
                            </div>
                        </div>

                        <!-- Detailed Metrics -->
                        <div class="stats-card p-6 lg:col-span-2">
                            <h3 class="text-xl font-semibold mb-4">Detailed Performance Metrics</h3>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                                <div class="text-center">
                                    <div id="topFourRate" class="text-2xl font-bold text-green-400">60%</div>
                                    <div class="text-sm opacity-75">Top 4 Rate</div>
                                </div>
                                <div class="text-center">
                                    <div id="firstPlaces" class="text-2xl font-bold text-yellow-400">1</div>
                                    <div class="text-sm opacity-75">First Places</div>
                                </div>
                                <div class="text-center">
                                    <div id="bottomFourRate" class="text-2xl font-bold text-red-400">40%</div>
                                    <div class="text-sm opacity-75">Bottom 4 Rate</div>
                                </div>
                                <div class="text-center">
                                    <div id="consistency" class="text-2xl font-bold text-blue-400">7.2</div>
                                    <div class="text-sm opacity-75">Consistency</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="historyTab" class="tab-content hidden">
                    <div class="stats-card p-6">
                        <h3 class="text-xl font-semibold mb-4">Game History</h3>
                        <div id="gameHistoryList" class="space-y-3">
                            <!-- Game history items will be populated here -->
                        </div>
                    </div>
                </div>

                <div id="comparisonTab" class="tab-content hidden">
                    <div class="stats-card p-6">
                        <h3 class="text-xl font-semibold mb-4">Player Comparison</h3>
                        <div class="mb-4">
                            <select id="comparePlayer" class="search-input">
                                <option value="">Select player to compare...</option>
                                <option value="souless">Souless</option>
                                <option value="aespakarina">aespa karina</option>
                                <option value="spaceball">spaceball</option>
                            </select>
                        </div>
                        <div id="comparisonContent">
                            <p class="text-gray-400 text-center py-8">Select a player to compare statistics</p>
                        </div>
                    </div>
                </div>

                <div id="trendsTab" class="tab-content hidden">
                    <div class="stats-card p-6">
                        <h3 class="text-xl font-semibold mb-4">Performance Trends</h3>
                        <div class="chart-container">
                            <canvas id="trendsChart" width="400" height="300"></canvas>
                        </div>
                        <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="text-center p-4 bg-white bg-opacity-5 rounded-lg">
                                <div class="rank-improvement">↗ Improving</div>
                                <div class="text-sm mt-2 opacity-75">Trend Direction</div>
                            </div>
                            <div class="text-center p-4 bg-white bg-opacity-5 rounded-lg">
                                <div class="text-xl font-bold text-green-400">+2.1</div>
                                <div class="text-sm mt-1 opacity-75">Avg Change/Game</div>
                            </div>
                            <div class="text-center p-4 bg-white bg-opacity-5 rounded-lg">
                                <div class="text-xl font-bold text-blue-400">85%</div>
                                <div class="text-sm mt-1 opacity-75">Consistency Score</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Default State -->
            <div id="defaultState" class="text-center py-12">
                <div class="max-w-md mx-auto">
                    <div class="mb-6">
                        <svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                    </div>
                    <h2 class="text-2xl font-bold mb-2">Player Statistics</h2>
                    <p class="text-gray-400 mb-6">Search for a player to view detailed performance statistics and analytics.</p>
                    <div class="text-left bg-white bg-opacity-5 rounded-lg p-4">
                        <h4 class="font-semibold mb-2">Available Players:</h4>
                        <div class="space-y-1 text-sm">
                            <div class="flex justify-between">
                                <span>dishsoap</span>
                                <span class="text-yellow-400">#1 Global</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Souless</span>
                                <span class="text-gray-400">#2 Global</span>
                            </div>
                            <div class="flex justify-between">
                                <span>aespa karina</span>
                                <span class="text-gray-400">#3 Global</span>
                            </div>
                            <div class="flex justify-between">
                                <span>spaceball</span>
                                <span class="text-gray-400">#4 Global</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const API_BASE = 'https://tft-tournament-tracker-dev.kay-e1e.workers.dev';
        let currentPlayer = null;
        let placementChart = null;
        let pointsChart = null;
        let trendsChart = null;

        // Sample player data
        const samplePlayers = {
            'dishsoap': {
                name: 'dishsoap',
                region: 'NA',
                rank: 1,
                totalPoints: 28,
                avgPlacement: 3.2,
                gamesPlayed: 5,
                winRate: 20,
                topFourRate: 60,
                firstPlaces: 1,
                bottomFourRate: 40,
                consistency: 7.2,
                gameHistory: [
                    { game: 1, lobby: 'A', placement: 1, points: 8, date: '2025-09-21' },
                    { game: 2, lobby: 'A', placement: 2, points: 6, date: '2025-09-21' },
                    { game: 3, lobby: 'A', placement: 4, points: 4, date: '2025-09-21' },
                    { game: 4, lobby: 'A', placement: 1, points: 8, date: '2025-09-21' },
                    { game: 5, lobby: 'A', placement: 8, points: 2, date: '2025-09-21' }
                ],
                placementDistribution: [1, 1, 0, 1, 0, 0, 0, 1] // 1st, 2nd, 3rd, 4th, 5th, 6th, 7th, 8th
            },
            'souless': {
                name: 'Souless',
                region: 'NA',
                rank: 2,
                totalPoints: 26,
                avgPlacement: 3.6,
                gamesPlayed: 5,
                winRate: 20,
                topFourRate: 80,
                firstPlaces: 1,
                bottomFourRate: 20,
                consistency: 8.1,
                gameHistory: [
                    { game: 1, lobby: 'B', placement: 2, points: 6, date: '2025-09-21' },
                    { game: 2, lobby: 'B', placement: 1, points: 8, date: '2025-09-21' },
                    { game: 3, lobby: 'B', placement: 7, points: 2, date: '2025-09-21' },
                    { game: 4, lobby: 'B', placement: 4, points: 4, date: '2025-09-21' },
                    { game: 5, lobby: 'B', placement: 2, points: 6, date: '2025-09-21' }
                ],
                placementDistribution: [1, 2, 0, 1, 0, 0, 1, 0]
            }
        };

        // Utility Functions
        function showLoading(show = true) {
            document.getElementById('loadingState').classList.toggle('hidden', !show);
            document.getElementById('playerProfile').classList.toggle('hidden', show);
            document.getElementById('defaultState').classList.toggle('hidden', show);
        }

        function updatePerformanceBadge(avgPlacement) {
            const badge = document.getElementById('performanceBadge');
            if (avgPlacement <= 2.5) {
                badge.className = 'performance-badge badge-excellent';
                badge.textContent = 'Excellent Performance';
            } else if (avgPlacement <= 4.0) {
                badge.className = 'performance-badge badge-good';
                badge.textContent = 'Good Performance';
            } else if (avgPlacement <= 5.5) {
                badge.className = 'performance-badge badge-average';
                badge.textContent = 'Average Performance';
            } else {
                badge.className = 'performance-badge badge-poor';
                badge.textContent = 'Needs Improvement';
            }
        }

        // Chart Functions
        function createPlacementChart(placementData) {
            const ctx = document.getElementById('placementChart').getContext('2d');
            
            if (placementChart) {
                placementChart.destroy();
            }

            placementChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['1st', '2nd', '3rd', '4th', '5th', '6th', '7th', '8th'],
                    datasets: [{
                        data: placementData,
                        backgroundColor: [
                            '#fbbf24', '#c0c0c0', '#cd7f32', '#10b981',
                            '#3b82f6', '#6366f1', '#8b5cf6', '#ef4444'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { color: 'white' }
                        }
                    }
                }
            });
        }

        function createPointsChart(gameHistory) {
            const ctx = document.getElementById('pointsChart').getContext('2d');
            
            if (pointsChart) {
                pointsChart.destroy();
            }

            pointsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: gameHistory.map(g => `Game ${g.game}`),
                    datasets: [{
                        label: 'Points',
                        data: gameHistory.map(g => g.points),
                        borderColor: '#6366f1',
                        backgroundColor: 'rgba(99, 102, 241, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { labels: { color: 'white' } }
                    },
                    scales: {
                        x: { 
                            ticks: { color: 'white' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        },
                        y: { 
                            ticks: { color: 'white' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            beginAtZero: true,
                            max: 8
                        }
                    }
                }
            });
        }

        function createTrendsChart(gameHistory) {
            const ctx = document.getElementById('trendsChart').getContext('2d');
            
            if (trendsChart) {
                trendsChart.destroy();
            }

            // Calculate cumulative average placement
            let cumulativeAvg = [];
            let sum = 0;
            gameHistory.forEach((game, index) => {
                sum += game.placement;
                cumulativeAvg.push((sum / (index + 1)).toFixed(2));
            });

            trendsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: gameHistory.map(g => `Game ${g.game}`),
                    datasets: [{
                        label: 'Average Placement',
                        data: cumulativeAvg,
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { labels: { color: 'white' } }
                    },
                    scales: {
                        x: { 
                            ticks: { color: 'white' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        },
                        y: { 
                            ticks: { color: 'white' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            reverse: true,
                            min: 1,
                            max: 8
                        }
                    }
                }
            });
        }

        // Player Functions
        function loadPlayer(playerId) {
            showLoading(true);
            currentPlayer = samplePlayers[playerId];
            
            if (!currentPlayer) {
                showLoading(false);
                return;
            }

            setTimeout(() => {
                displayPlayerStats(currentPlayer);
                showLoading(false);
                document.getElementById('defaultState').classList.add('hidden');
            }, 500);
        }

        function displayPlayerStats(player) {
            // Update player profile
            document.getElementById('playerName').textContent = player.name;
            document.getElementById('playerRegion').textContent = player.region;
            document.getElementById('playerRank').textContent = `#${player.rank} Global`;

            // Update statistics
            document.getElementById('totalPoints').textContent = player.totalPoints;
            document.getElementById('avgPlacement').textContent = player.avgPlacement;
            document.getElementById('gamesPlayed').textContent = player.gamesPlayed;
            document.getElementById('winRate').textContent = `${player.winRate}%`;
            document.getElementById('topFourRate').textContent = `${player.topFourRate}%`;
            document.getElementById('firstPlaces').textContent = player.firstPlaces;
            document.getElementById('bottomFourRate').textContent = `${player.bottomFourRate}%`;
            document.getElementById('consistency').textContent = player.consistency;

            updatePerformanceBadge(player.avgPlacement);

            // Create charts
            createPlacementChart(player.placementDistribution);
            createPointsChart(player.gameHistory);
            createTrendsChart(player.gameHistory);

            // Update game history
            displayGameHistory(player.gameHistory);
        }

        function displayGameHistory(gameHistory) {
            const container = document.getElementById('gameHistoryList');
            container.innerHTML = gameHistory.map(game => {
                const placementClass = `placement-${game.placement}`;
                const borderColor = getPlacementColor(game.placement);
                
                return `
                    <div class="game-history-item" style="border-left-color: ${borderColor}">
                        <div class="flex items-center justify-between w-full">
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center">
                                    <span class="placement-dot ${placementClass}"></span>
                                    <span class="font-semibold">${getPlacementSuffix(game.placement)} Place</span>
                                </div>
                                <span class="text-sm opacity-75">Game ${game.game} • Lobby ${game.lobby}</span>
                            </div>
                            <div class="text-right">
                                <div class="font-bold text-lg">${game.points} pts</div>
                                <div class="text-xs opacity-75">${game.date}</div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function getPlacementColor(placement) {
            const colors = {
                1: '#fbbf24', 2: '#c0c0c0', 3: '#cd7f32', 4: '#10b981',
                5: '#3b82f6', 6: '#6366f1', 7: '#8b5cf6', 8: '#ef4444'
            };
            return colors[placement] || '#6b7280';
        }

        function getPlacementSuffix(place) {
            const suffixes = ['st', 'nd', 'rd', 'th', 'th', 'th', 'th', 'th'];
            return `${place}${suffixes[place - 1]}`;
        }

        // Tab Functions
        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                if (btn.dataset.tab === tabName) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            // Show/hide tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.getElementById(`${tabName}Tab`).classList.remove('hidden');
        }

        // Search Functions
        function setupSearch() {
            const searchInput = document.getElementById('playerSearch');
            const searchResults = document.getElementById('searchResults');

            searchInput.addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase().trim();
                
                if (query.length === 0) {
                    searchResults.classList.add('hidden');
                    return;
                }

                const matches = Object.keys(samplePlayers)
                    .filter(id => samplePlayers[id].name.toLowerCase().includes(query))
                    .slice(0, 5);

                if (matches.length > 0) {
                    searchResults.innerHTML = matches.map(id => {
                        const player = samplePlayers[id];
                        return `
                            <div onclick="selectPlayer('${id}')" class="p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-colors">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <div class="font-medium">${player.name}</div>
                                        <div class="text-sm opacity-75">${player.region} • ${player.totalPoints} pts</div>
                                    </div>
                                    <div class="text-sm opacity-75">#${player.rank}</div>
                                </div>
                            </div>
                        `;
                    }).join('');
                    searchResults.classList.remove('hidden');
                } else {
                    searchResults.innerHTML = '<div class="p-3 text-center text-gray-400">No players found</div>';
                    searchResults.classList.remove('hidden');
                }
            });

            // Hide results when clicking outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('#playerSearch') && !e.target.closest('#searchResults')) {
                    searchResults.classList.add('hidden');
                }
            });
        }

        function selectPlayer(playerId) {
            document.getElementById('playerSearch').value = samplePlayers[playerId].name;
            document.getElementById('searchResults').classList.add('hidden');
            loadPlayer(playerId);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupSearch();
            
            // Load default player for demo
            setTimeout(() => {
                selectPlayer('dishsoap');
            }, 1000);
        });
    </script>
</body>
</html>